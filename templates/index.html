<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>INADEV Weather App</title>
</head>
<style>
    body {
        margin: 0;
        padding: 0;
        background-size: cover;
        background-position: center;
        min-height: 100vh;
        background-attachment: fixed;
    }

    .elementor-widget-image {
        margin-top: 2%;
        text-align: center
    }

    .elementor-widget-image a {
        display: inline-block
    }

    .elementor-widget-image a img[src$=".svg"] {
        width: 48px
    }

    .elementor-widget-image img {
        vertical-align: middle;
        display: inline-block
    }

    .prompt {
        text-align: center;
    }

    .prompt>h1 {
        margin: 5%;
        color: #f16632;
        background-color: white;
        display: inline-block;
        padding: 10px;
    }

    .prompt input {
        display: inline-block;
        padding: 10px;
        box-sizing: border-box;
        color: black;
    }

    .prompt button {
        padding: 10px;
        margin: 2%;
        background-color: #f16632;
    }

    .results {
        text-align: center;
        display: none;
        margin-top: 20px;
        font-size: 5em;
        color: #f16632;
        font-weight: bold;
    }

    .result-item {
        background-color: white;
        padding: 10px;
        margin: 5px;
        display: inline-block;
        vertical-align: middle;
    }
</style>

<body style="background-image: url('/static/assets/partly-cloudy.jpg');">
    <div class="elementor-widget-image">
        <a href="https://www.inadev.com">
            <img width="289" height="69" src="https://www.inadev.com/wp-content/uploads/2023/05/Inadev_logo.svg"
                class="attachment-full size-full wp-image-43" alt="logo" style="width:100%;height:23.88%;max-width:289px">
        </a>
    </div>
    <div class="prompt">
        <h1>Enter the zip code of the place you want view the weather:</h1>
        <form action="/getWeather" method="POST">
            <input type="text" pattern="\d{5}" maxlength="5" minlength="5" placeholder="Enter zip code.." name="zipcode"
                required>
            <button type="submit">GO</button>
        </form>
    </div>
    <div class="results" id="weatherResult" style="display: none;">
    </div>

    <script>
        document.querySelector('form').addEventListener('submit', function (event) {
            event.preventDefault();

            const formData = new FormData();
            formData.append('zipcode', document.querySelector('input[name="zipcode"]').value);

            fetch(`/getWeather`, {
                method: 'POST',
                body: formData
            })
                .then(response => response.json())
                .then(data => {
                    const resultDiv = document.getElementById('weatherResult');
                    resultDiv.innerHTML = '';
                    if (data.error) {

                        resultDiv.innerText = data.error;
                        resultDiv.style.display = "block";
                        resultDiv.style.color = "#f16632";
                        resultDiv.style.fontSize = "5em";
                        resultDiv.style.fontWeight = "bold";
                    } else {


                        const tempElement = document.createElement('p');
                        tempElement.textContent = `${data.temperature}Â°F`;
                        tempElement.classList.add('result-item');
                        resultDiv.appendChild(tempElement);

                        const conditionElement = document.createElement('p');
                        conditionElement.textContent = data.condition;
                        conditionElement.classList.add('result-item');
                        resultDiv.appendChild(conditionElement);

                        resultDiv.style.display = "block";

                        const imageUrl = `/static/assets/${data.condition}.jpg`;
                        document.body.style.backgroundImage = `url('${imageUrl}')`;
                    }
                })
                .catch(error => console.error('Error:', error));
        });

    </script>
</body>

</html>